<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Math Trainer</title>
    <style>
      html, body { height: 100%; margin: 0; background: #000; }
      #game-container { width: 100%; height: 100%; }
      /* Reusable HTML modal overlay */
      #html-modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 9999; }
      #html-modal { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: min(900px, 92vw); height: min(640px, 86vh); background: #0f1720; border: 1px solid #fff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.6); overflow: hidden; }
      #html-modal header { height: 44px; display: flex; align-items: center; justify-content: space-between; padding: 0 12px; color: #fff; background: #13212a; border-bottom: 1px solid #274050; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
      #html-modal header h3 { margin: 0; font-size: 16px; font-weight: 600; }
      #html-modal header button { appearance: none; border: 1px solid #8ab4ff; color: #e8f0fe; background: transparent; padding: 4px 10px; border-radius: 8px; cursor: pointer; }
      #html-modal header button:hover { background: rgba(138,180,255,0.12); }
      #html-modal iframe { width: 100%; height: calc(100% - 44px); border: 0; background: #fff; }
    </style>
    <script type="module" crossorigin src="/WebGame/assets/index-DSeSGEb_.js"></script>
  </head>
  <body>
    <div id="game-container"></div>
    <!-- Reusable HTML modal -->
    <div id="html-modal-overlay" aria-hidden="true">
      <div id="html-modal" role="dialog" aria-modal="true" aria-labelledby="html-modal-title">
        <header>
          <h3 id="html-modal-title">Feedback</h3>
          <button id="html-modal-close" type="button" title="Close">Close</button>
        </header>
        <iframe id="html-modal-iframe" src="about:blank"></iframe>
      </div>
    </div>
    <script>
      // Determine base path for assets when hosted under a subfolder (e.g., /trainer/)
      (function(){
        var path = location.pathname;
        if (!path.endsWith('/')) path = path.substring(0, path.lastIndexOf('/') + 1);
        // Allow manual override via data-public-base on script tag if desired
        if (!window.__PUBLIC_BASE__) window.__PUBLIC_BASE__ = path;
      })();

      // Lightweight, reusable HTML modal helpers
      (function(){
        const overlay = document.getElementById('html-modal-overlay');
        const iframe = document.getElementById('html-modal-iframe');
        const title = document.getElementById('html-modal-title');
        const btnClose = document.getElementById('html-modal-close');
        function openHtmlModal(url, opts){
          try {
            if (opts && opts.title && title) title.textContent = String(opts.title);
          } catch {}
          if (iframe) iframe.src = url;
          if (overlay) overlay.style.display = 'block';
          document.body.style.overflow = 'hidden';
        }
        function closeHtmlModal(){
          if (overlay) overlay.style.display = 'none';
          if (iframe) iframe.src = 'about:blank';
          document.body.style.overflow = '';
        }
        window.openHtmlModal = openHtmlModal;
        window.closeHtmlModal = closeHtmlModal;
        if (btnClose) btnClose.addEventListener('click', closeHtmlModal);
        if (overlay) overlay.addEventListener('click', (e) => {
          if (e.target === overlay) closeHtmlModal();
        });
        window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeHtmlModal(); });
      })();
    </script>
  </body>
</html>
